<div id="layoutSidenav_content">
  <main>
    <div class="container-fluid px-4">
      <div class="d-flex justify-content-between align-items-center mt-4 mb-3">
        <h1 class="mt-4">Feedback</h1>
        <button type="button" class="btn btn-success" (click)="feebacks()">
          <i class="bi bi-plus-circle"></i> Feedbacks
        </button>
      </div>
      <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Feedback</li>
      </ol>
      <div class="row">
        <div class="col-12 mb-3">
          <div class="card">
            <div class="card-header">
              <h4>{{ feedback.title }}</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-4 mb-3">
                  <h5>Description:</h5>
                </div>
                <div class="col-12 mb-3">
                  <div class="card">
                    <div class="card-body">
                      <p>{{ feedback.description }}</p>
                    </div>
                  </div>
                </div>
              </div>
              <button  class="btn btn-primary" (click)="edit(feedback.id)">Edit Feedback</button>
            </div>
          </div>
        </div>
        <div class="col-12 mb-3">
          <div class="card">
            <div class="card-header">
              <h4>Add Comment Here</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <form [formGroup]="addCommentForm" (ngSubmit)="addComment()" id="addCommentForm" class="mb-4">
                  <input
                    class="form-control"
                    id="feedbackId"
                    type="hidden"
                    required
                    value="{{ feedback.id }}"
                    formControlName="feedbackId"
                    [class.is-invalid]="addCommentForm.get('feedbackId')?.invalid && (addCommentForm.get('feedbackId')?.touched || addCommentForm.get('feedbackId')?.dirty)"
                  />
                  <div class="mb-3 form-floating">
                    <textarea
                      class="form-control rules-textarea h-50"
                      id="content"
                      type="content"
                      required
                      formControlName="content"
                      rows="5"
                      [class.is-invalid]="addCommentForm.get('content')?.invalid && (addCommentForm.get('content')?.touched || addCommentForm.get('content')?.dirty)"
                    ></textarea>
                    <label for="content">Comment</label>
                  </div>
                  <button class="btn btn-success" type="submit">
                    New Comment
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 mb-3">
          <div class="table-responsive">
            <table class="table table-striped table-hover align-middle">
              <thead class="table-dark">
              <tr>
                <th scope="col">Comments</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let element of dataSource">
                <td>{{ element.content }}</td>
              </tr>
              <tr *ngIf="dataSource.length === 0">
                <td colspan="6" class="text-center text-muted py-3">No data available</td>
              </tr>
              </tbody>
            </table>
          </div>
          <nav *ngIf="totalElements > 0" aria-label="Page navigation">
            <ul class="pagination justify-content-center">
              <li class="page-item" [class.disabled]="pageIndex === 0">
                <button class="page-link" (click)="onPageChange({pageIndex: pageIndex - 1, pageSize})">Previous</button>
              </li>
              <li class="page-item" *ngFor="let p of [].constructor(Math.ceil(totalElements / pageSize)); let i = index" [class.active]="i === pageIndex">
                <button class="page-link" (click)="onPageChange({pageIndex: i, pageSize})"> {{ i + 1 }} </button>
              </li>
              <li class="page-item" [class.disabled]="(pageIndex + 1) * pageSize >= totalElements">
                <button class="page-link" (click)="onPageChange({pageIndex: pageIndex + 1, pageSize})">Next</button>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
  </main>
  <div #myModal id="myModal" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Exemplo de Modal</h5>
          <button type="button" class="btn-close" aria-label="Close" (click)="closeModal()"></button>
        </div>
        <div class="modal-body">
          <h1>Modal Feedback</h1>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">Close</button>
        </div>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</div>
<app-toast #toast></app-toast>
